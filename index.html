<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset ="UTF-8">
		<meta name="keywords" content="diseÃ±o web, codigo, css, javascript, tutoriales,html"><!--para que en el buscador aparezca-->
		<meta name="description" content="sdwafesrthgfewQQwdefr,wfaesgrwdeff">
		<meta name="viewport" content="width=device-width, user-scalable=no,
		initial-scale=1.0, maximun-scale=1.0,minimun-scale=1.0">
		<title>Reporte de Bugs</title> 
		<link rel="stylesheet" type="text/css" href="estilos.css">
		<!--normalize nos permite adecuar la pagina para todos los navegadores-->
		<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&display=swap" rel="stylesheet">
    </head>
	<body>
		<section class="trabajos">	
			<form class="formulario" action="" id="formulario" name="formulario" method="post">		
				<div class="contenedor">
					<h3 class="titulo">Reporte De Bugs</h3>
					<input type="text" placeholder="Quien Reporta?" name="nombre" required>
					<textarea name="mensaje" placeholder="Descripcion del problema"></textarea>
				
				<div class="sel">
					Prioridad: 
   					<select class="prioridad" name="prioridad">
    				 	<option>Baja</option>
     					<option>Media</option>
     					<option>Alta</option>
   					</select>
   					</p>

					<p>
						Modulo:
					<select class="modulo" name="modulo">
    				 	<option>Administrador Web</option>
     					<option>BackEnd</option>
     					<option>Aplicacion Mobil</option>
   					</select>
   					</p>
   					<p>
   						<br>
   			
   				</div>

					<input type="file" name="file" id="file" class="file">
	   				<input type="button" value="Subir Imagen" class="btn"
	   				onclick="document.getElementById('file').click()">

   				<div class="ima" id="iP">
   					<img alt="Preview" class="i">
   					<span class="imagen">Image Preview</span>
   				</div>

   					<ul class="error" id="error"></ul>
   				</div>

   				<input class="boton" type="submit" value="Enviar" id="btn">
			</form>
		</section>

		<script>


				//para que la imagen aparezca

			const file = document.getElementById("file");
			const pC = document.getElementById("iP");
			const pI = pC.querySelector(".i");
			const pDT = pC.querySelector(".imagen");

			file.addEventListener("change", function(){
				const filee = this.files[0];

				if(filee){
					const reader = new FileReader();

					pDT.style.display = "none";
					pI.style.display = 'block';

					reader.addEventListener("load", function(){
						console.log(this);
						pI.setAttribute("src", this.result);
					});

					reader.readAsDataURL(filee);
				}else{
					pDT.style.display = null;
					pI.style.display = null;
					pI.setAttribute("src","");
				}
			});


			//para el error
				
				var formulario = document.getElementById('formulario'),
				nombre = formulario.nombre,
				mensaje = formulario.mensaje,
				error = document.getElementById('error');

				function validarNombre(e){
					if(nombre.value == '' || nombre.value == null){
						console.log('Porfavor completa el nombre');
						error.style.display = 'block';
						error.innerHTML = error.innerHTML + '<li> Porfavor completa el nombre</li>'// para que muestre todos los errores
						e.preventDefault();
					}else{
						error.style.display = 'none';
					}
				}

				function validarMensaje(e){
					if(mensaje.value == '' || mensaje.value == null){
						console.log('Porfavor deja un mensaje');
						error.style.display = 'block';
						error.innerHTML = error.innerHTML + '<li> Porfavor deja un mensaje</li>'// para que muestre todos los errores
						e.preventDefault();
					}else{
						error.style.display = 'none';// para que ya no aparezcan mensajes de error
					}
				}

				function validarFormulario(e){
					error.innerHTML = '';//para que se reinicien los errores encontrados
					validarNombre(e);
					validarMensaje(e);
			
				}

				formulario.addEventListener('submit',validarFormulario);
		</script>
	</body>
</html>